{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/amapandey/Projects/emi-tracker/components/Header.js"],"sourcesContent":["import Link from 'next/link';\n\nconst linkStyle = {\n  display: 'flex',\n  alignItems: 'center',\n  gap: 8,\n  textDecoration: 'none',\n  color: '#0070f3',\n  fontWeight: 600,\n};\n\nexport default function Header() {\n  return (\n    <header style={{ background: '#fff', padding: '16px 32px', boxShadow: '0 2px 8px #eee', display: 'flex', alignItems: 'center', gap: 32 }}>\n      <nav style={{ display: 'flex', alignItems: 'center', gap: 24 }}>\n        <Link href=\"/\" style={linkStyle}>\n          <span style={{ fontSize: 20 }}>üè†</span> Home\n        </Link>\n        <Link href=\"/all-loans\" style={linkStyle}>\n          All Loans\n        </Link>\n      </nav>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,MAAM,YAAY;IAChB,SAAS;IACT,YAAY;IACZ,KAAK;IACL,gBAAgB;IAChB,OAAO;IACP,YAAY;AACd;AAEe,SAAS;IACtB,qBACE,qKAAC;QAAO,OAAO;YAAE,YAAY;YAAQ,SAAS;YAAa,WAAW;YAAkB,SAAS;YAAQ,YAAY;YAAU,KAAK;QAAG;kBACrI,cAAA,qKAAC;YAAI,OAAO;gBAAE,SAAS;gBAAQ,YAAY;gBAAU,KAAK;YAAG;;8BAC3D,qKAAC,kJAAI;oBAAC,MAAK;oBAAI,OAAO;;sCACpB,qKAAC;4BAAK,OAAO;gCAAE,UAAU;4BAAG;sCAAG;;;;;;wBAAS;;;;;;;8BAE1C,qKAAC,kJAAI;oBAAC,MAAK;oBAAa,OAAO;8BAAW;;;;;;;;;;;;;;;;;AAMlD"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///Users/amapandey/Projects/emi-tracker/pages/index.js"],"sourcesContent":["import Header from '../components/Header';\nimport { useEffect, useState } from 'react';\nfunction getClosestDate(dueDay) {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = today.getMonth();\n  let date = new Date(year, month, dueDay);\n  if (date < today) {\n    date = new Date(year, month + 1, dueDay);\n  }\n  return date;\n}\n\nexport default function Home() {\n  const [loans, setLoans] = useState([]);\n  const [editing, setEditing] = useState({});\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetch('/api/loans')\n      .then(res => res.json())\n      .then(data => setLoans(data));\n  }, []);\n\n  const handlePaidChange = (index, checked) => {\n    setLoans(loans => loans.map((loan, i) => i === index ? { ...loan, paid: checked ? loan.emi : null } : loan));\n    setEditing(editing => ({ ...editing, [index]: true }));\n  };\n\n  const handleSave = async () => {\n    setLoading(true);\n    await fetch('/api/loans', {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(loans),\n    });\n    setEditing({});\n    setLoading(false);\n  };\n\n  // Calculate unpaid and total EMI\n  const totalEmi = loans.reduce((sum, loan) => sum + (Number(loan.emi) || 0), 0);\n  const totalPaid = loans.reduce((sum, loan) => sum + (Number(loan.paid) || 0), 0);\n  const unpaidEmi = totalEmi - totalPaid;\n\n  // Group loans by due_day\n  const groups = {};\n  loans.forEach((loan, idx) => {\n    if (!groups[loan.due_day]) groups[loan.due_day] = [];\n    groups[loan.due_day].push({ ...loan, idx });\n  });\n  const sortedDays = Object.keys(groups).sort((a, b) => {\n    const dateA = getClosestDate(Number(a));\n    const dateB = getClosestDate(Number(b));\n    return dateA - dateB;\n  });\n\n  return (\n    <div style={{ padding: 32, position: 'relative' }}>\n      <Header />\n      <div style={{\n        position: 'fixed',\n        top: 12,\n        left: '50%',\n        transform: 'translateX(-50%)',\n        zIndex: 1000,\n        background: '#fff',\n        boxShadow: '0 2px 8px #ccc',\n        borderRadius: 10,\n        padding: '8px 18px',\n        display: 'flex',\n        alignItems: 'center',\n        minWidth: 240,\n        fontWeight: 600,\n        fontSize: 15,\n        gap: 12,\n      }}>\n        <span style={{ fontSize: 15, color: '#333' }}>\n          ‚Çπ{unpaidEmi.toLocaleString()} / <span style={{ color: '#0070f3', fontWeight: 700 }}>‚Çπ{totalEmi.toLocaleString()}</span>\n        </span>\n        <button\n          onClick={handleSave}\n          disabled={loading || Object.keys(editing).length === 0}\n          style={{\n            marginLeft: 'auto',\n            background: '#0070f3',\n            color: 'white',\n            border: 'none',\n            padding: '6px 14px',\n            borderRadius: 6,\n            fontWeight: 600,\n            fontSize: '14px',\n            boxShadow: '0 2px 8px #ccc',\n          }}\n        >\n          {loading ? 'Saving...' : 'Save'}\n        </button>\n        <button\n          onClick={async () => {\n            const code = window.prompt('Enter reset code:');\n            if (code === '3722') {\n              const resetLoans = loans.map(loan => ({ ...loan, paid: 0 }));\n              setLoans(resetLoans);\n              setEditing({});\n              setLoading(true);\n              await fetch('/api/loans', {\n                method: 'PUT',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(resetLoans),\n              });\n              setLoading(false);\n            } else if (code !== null) {\n              window.alert('Incorrect code. Reset cancelled.');\n            }\n          }}\n          style={{\n            marginLeft: 8,\n            background: '#e53935',\n            color: 'white',\n            border: 'none',\n            padding: '6px 14px',\n            borderRadius: 6,\n            fontWeight: 600,\n            fontSize: '14px',\n            boxShadow: '0 2px 8px #ccc',\n            cursor: 'pointer',\n          }}\n        >\n          Reset\n        </button>\n      </div>\n      <h1 style={{ marginTop: 60, fontSize: '2.1rem' }}>Upcoming EMIs</h1>\n      <div style={{ display: 'flex', flexDirection: 'column', gap: 18, marginTop: 18, maxWidth: 360 }}>\n        {sortedDays.map(day => {\n          const group = groups[day];\n          const groupDate = getClosestDate(Number(day));\n          const groupTotalEmi = group.reduce((sum, loan) => sum + (Number(loan.emi) || 0), 0);\n          const groupTotalPaid = group.reduce((sum, loan) => sum + (Number(loan.paid) || 0), 0);\n          // Determine border color: green if all paid, orange otherwise\n          const allPaid = groupTotalEmi > 0 && groupTotalEmi === groupTotalPaid;\n          const borderColor = allPaid ? '#2ecc40' : '#ff9800';\n          return (\n            <div key={day} style={{\n              borderRadius: 18,\n              background: '#f7f7f7',\n              marginBottom: 0,\n              padding: '14px 10px 10px 10px',\n              boxShadow: '0 2px 12px #eee',\n              border: `2.5px solid ${borderColor}`,\n            }}>\n              <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n                marginBottom: 8,\n                padding: '0 4px',\n                fontWeight: 600,\n                fontSize: 15,\n              }}>\n                <span>Due: {groupDate.toLocaleDateString('en-IN', { day: 'numeric', month: 'short', year: 'numeric' })}</span>\n                {allPaid ? null : (\n                  <span style={{ color: '#ff9800', fontWeight: 600 }}>\n                    ‚Çπ{(groupTotalEmi - groupTotalPaid).toLocaleString()} left\n                  </span>\n                )}\n              </div>\n              <div style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>\n                {group.map(loan => {\n                  const paid = Number(loan.paid) === Number(loan.emi);\n                  return (\n                    <div key={loan.idx} style={{\n                      minWidth: 200,\n                      maxWidth: 320,\n                      flex: 1,\n                      background: '#fff',\n                      borderRadius: 10,\n                      boxShadow: '0 2px 8px #eee',\n                      padding: 14,\n                      display: 'flex',\n                      flexDirection: 'column',\n                      alignItems: 'flex-start',\n                      position: 'relative',\n                      marginBottom: 0,\n                    }}>\n                      <label style={{ position: 'absolute', top: 10, right: 10, display: 'flex', alignItems: 'center', gap: 4, fontSize: 15, fontWeight: 500 }}>\n                        <input\n                          type=\"checkbox\"\n                          checked={paid}\n                          onChange={e => handlePaidChange(loan.idx, e.target.checked)}\n                          style={{ width: 18, height: 18 }}\n                        /> Paid\n                      </label>\n                      <div style={{ fontSize: '1.2rem', fontWeight: 700, marginBottom: 4 }}>{loan.name}</div>\n                      <div style={{ fontSize: '1.05rem', color: '#0070f3', marginBottom: 4 }}>‚Çπ{Number(loan.emi).toLocaleString()}</div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}